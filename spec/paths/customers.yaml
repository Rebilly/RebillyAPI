get:
  tags:
    - Customers
  summary: Retrieve a list of customers
  description: |
    Retrieve a list of customers
  parameters:
    - $ref: "#/components/parameters/collectionLimit"
    - $ref: "#/components/parameters/collectionOffset"
    - $ref: "#/components/parameters/collectionFilter"
    - $ref: "#/components/parameters/collectionQuery"
    - $ref: "#/components/parameters/collectionExpand"
    - $ref: "#/components/parameters/collectionFields"
    - x-rebillyMerge:
      - $ref: "#/components/parameters/collectionSort"
      - schema:
          items:
            x-sortableEnum:
              - id
              - email
              - averageValue
              - paymentCount
              - lastPaymentTime
              - lifetimeRevenue
              - invoiceCount
              - createdTime
              - updatedTime
    - x-rebillyMerge:
      - $ref: "#/components/parameters/mediaType"
      - schema:
          enum:
            - application/json
            - text/csv
  responses:
    200:
      description: A list of Customers was retrieved successfully
      headers:
        Rate-Limit-Limit:
          $ref: "#/components/headers/Rate-Limit-Limit"
        Rate-Limit-Remaining:
          $ref: "#/components/headers/Rate-Limit-Remaining"
        Rate-Limit-Reset:
          $ref: "#/components/headers/Rate-Limit-Reset"
        Pagination-Total:
          $ref: "#/components/headers/Pagination-Total"
        Pagination-Limit:
          $ref: "#/components/headers/Pagination-Limit"
        Pagination-Offset:
          $ref: "#/components/headers/Pagination-Offset"
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/Customer"
        text/csv:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/Customer"
    401:
      $ref: "#/components/responses/AccessForbidden"
post:
  tags:
    - Customers
  summary: Create a customer (without an ID)
  description: |
    Create a customer without a predefined ID.  
    The customer's primary address
    will be used as the default address for payment
    instruments, subscriptions and invoices if none
    are provided.

    If you wish to create the customer with a predefined
    ID (which we recommend to prevent duplication), you 
    may use our `PUT` request described below.

    Read our guide to [preventing duplicates](#section/Getting-Started-Guide/Preventing-Duplicates)
    to understand more.
  requestBody:
    $ref: "#/components/requestBodies/Customer"
  responses:
    201:
      $ref: "#/components/responses/Customer"
    401:
      $ref: "#/components/responses/AccessForbidden"
    409:
      $ref: "#/components/responses/Conflict"
    422:
      $ref: "#/components/responses/InvalidDataError"
