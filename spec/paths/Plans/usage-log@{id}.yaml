parameters:
  - $ref: "#/parameters/resourceId"
get:
  tags:
    - Usage records
  summary: Retrieve a specific usage record
  responses:
    200:
      description: Usage ercord was retrieved successfully
      headers:
        Rate-Limit-Limit:
          $ref: "#/headers/Rate-Limit-Limit"
        Rate-Limit-Remaining:
          $ref: "#/headers/Rate-Limit-Remaining"
        Rate-Limit-Reset:
          $ref: "#/headers/Rate-Limit-Reset"
      schema:
        $ref: "#/definitions/UsageRecord"
    401:
      $ref: "#/responses/AccessForbidden"
    404:
      $ref: "#/responses/NotFound"
put:
  tags:
    - Usage records
  summary: Update or create the specific usage record
  description: |
    The recommended method to report usage is `PUT` to control idempotency.
    This way prevents from reporting the usage twice, especially for “summarize” policy of aggregation.
    Because of the use of explicit URL, the first request will create the record, others will just update it.
    We recommend to use UUID to identify the usage records,
    however you can use any of format you already uses in your system. Only one constraint of ID is to be unique.
  parameters:
  - name: body
    in: body
    description: Usage record
    required: true
    schema:
      $ref: "#/definitions/UsageRecord"
  responses:
    200:
      description: Usage record was updated
      headers:
        Rate-Limit-Limit:
          $ref: "#/headers/Rate-Limit-Limit"
        Rate-Limit-Remaining:
          $ref: "#/headers/Rate-Limit-Remaining"
        Rate-Limit-Reset:
          $ref: "#/headers/Rate-Limit-Reset"
      schema:
        $ref: "#/definitions/UsageRecord"
    201:
      description: Usage record was created
      headers:
        Rate-Limit-Limit:
          $ref: "#/headers/Rate-Limit-Limit"
        Rate-Limit-Remaining:
          $ref: "#/headers/Rate-Limit-Remaining"
        Rate-Limit-Reset:
          $ref: "#/headers/Rate-Limit-Reset"
      schema:
        $ref: "#/definitions/UsageRecord"
    401:
      $ref: "#/responses/AccessForbidden"
    409:
      $ref: "#/responses/Conflict"
    422:
      description: Invalid data was sent
      schema:
        $ref: "#/definitions/InvalidError"
delete:
  tags:
    - Usage records
  summary: Delete a specific record
  responses:
    204:
      description: Usage record was deleted
      headers:
        Rate-Limit-Limit:
          $ref: "#/headers/Rate-Limit-Limit"
        Rate-Limit-Remaining:
          $ref: "#/headers/Rate-Limit-Remaining"
        Rate-Limit-Reset:
          $ref: "#/headers/Rate-Limit-Reset"
    401:
      $ref: "#/responses/AccessForbidden"
    404:
      $ref: "#/responses/NotFound"
    409:
      $ref: "#/responses/Conflict"
